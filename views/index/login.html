<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>学IT - 后台管理系统</title>
    <?php include '/views/common/style.html'?>
</head>
<body>
    
    <!-- 登录 -->
    <div class="login">
        <div class="login-wrap">
            <div class="avatar">
                <img src="/public/images/monkey.png" class="img-circle" alt="">
            </div>
            <form id = 'form' action="" class="col-md-offset-1 col-md-10">
                <div class="input-group input-group-lg">
                    <span class="input-group-addon">
                        <i class="fa fa-user"></i>
                    </span>
                    <input type="text" class="form-control" placeholder="用户名" name = tc_name>
                </div>
                <div class="input-group input-group-lg">
                    <span class="input-group-addon">
                        <i class="fa fa-key"></i>
                    </span>
                    <input type="password" class="form-control" placeholder="密码" name = tc_pass>
                </div>
                <button type="submit" class="btn btn-lg btn-primary btn-block">登 录</button>
            </form>
        </div>
    </div>
    
    <?php include '/views/common/script.html'?>

</body>
</html>
    
<script>
    //登陆的思路
    // 1  给(form表单) 按钮绑定事件
    // 2 获取用户名和密码 
    // 3 发送ajax 请求登接口
    $("#form").on('submit',function(){
        //表单序列化 来 获取 表单中的所有 val() 值    serialize()
        var vals = decodeURI( $("#form").serialize() )
        console.log(vals)
        $.ajax({
            url :'/api/login',
            type: 'post',
            data:vals,
            dataType:"json",
            success:function(data){
                console.log(data);
                if(data.code === 200){
                   location.href = '/index';
                }
            }
        })
        return false;
    })

</script>